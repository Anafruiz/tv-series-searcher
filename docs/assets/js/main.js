"use strict";const buttonElement=document.querySelector(".js-button"),inputElement=document.querySelector(".js-input"),nameElement=document.querySelector(".js-shows"),formElement=document.querySelector(".js-form");let showsList=[],favouriteList=[];function getFromApi(){const t=inputElement.value;fetch("//api.tvmaze.com/search/shows?q="+t).then(t=>t.json()).then(t=>{showsList=[];for(const e of t){const t=e.show.name,n=e.show.image,s=e.show.id;showsList.push({name:t,img:n,id:s})}paintElements(),setInLocalStorage()})}function handleForm(t){t.preventDefault()}formElement.addEventListener("submit",handleForm);let imagenDefault="https://via.placeholder.com/210x295/ffffff/666666/?";function paintElements(){let t="";t+='<ul class="ul">';for(const e of showsList){const n=e.name,s=e.img,o=e.id;let i;i=isShowsFavourites(e)?"backstyle":"",t+=`<li class="show " data-myid=${o} >`,t+=`<h2 class="title2">Nombre:${n}</h2>`,t+=null===s?`<img class="imgList  ${i}" src="${imagenDefault}"> `:`<img class="imgList  ${i}" src="${s.medium}"> `,t+="</li>"}t+="</ul>",nameElement.innerHTML=t,listenShowsEvents(),listenFav()}function isShowsFavourites(t){return void 0!==favouriteList.find(e=>e.id===t.id)}function listenShowsEvents(t){const e=document.querySelectorAll(".show");for(const t of e)t.addEventListener("click",handleShows)}function handleShows(t){const e=parseInt(t.currentTarget.dataset.myid),n=showsList.find((function(t){return t.id===e})),s=favouriteList.findIndex((function(t){return t.id===e}));-1===s?favouriteList.push(n):favouriteList.splice(s,1),setInLocalStorage(),paintFavoritesShow(),paintElements()}buttonElement.addEventListener("click",getFromApi);const favoriteElements=document.querySelector(".js-favourite--shows");function paintFavoritesShow(){let t="";t+='<button class="js-reset">Eliminar <i class="fa fa-trash" aria-hidden="true"></i></button>',t+='<ul class="ul-fav">';for(const e of favouriteList)t+=`<li class="favouriteShow" data-myid=${e.id} >`,t+='<h2 class="title2">Name:'+e.name,t+=' <button class="removeButton js-removeButton">Quitar</button>',t+="</h2>",null===e.img?t+=`<img src="${imagenDefault}">`:(t+=`<img class="backstyle"src="${e.img.medium}">`,t+="</li>");t+="</ul>",favoriteElements.innerHTML=t;document.querySelector(".js-reset").addEventListener("click",resetFavButton)}function setInLocalStorage(){const t=JSON.stringify(favouriteList);localStorage.setItem("favourites",t)}function getFromLocalStorage(){const t=localStorage.getItem("favourites");if(null===t)getFromApi();else{const e=JSON.parse(t);favouriteList=e}paintFavoritesShow()}function resetFavButton(){favouriteList=[],paintFavoritesShow(),paintElements()}function listenFav(){const t=document.querySelectorAll(".js-removeButton");for(const e of t)e.addEventListener("click",handleFav)}function handleFav(t){const e=parseInt(t.currentTarget.dataset.myid);console.log(e);const n=favouriteList.findIndex((function(t){return t.id===e}));-1===n&&favouriteList.splice(n),setInLocalStorage(),paintFavoritesShow(),paintElements()}getFromLocalStorage(),listenFav();